<!DOCTYPE html>
<html>
  <head>
    <title>aphorisms.io</title>
    <link href="css/styles.css" rel="stylesheet">
    <script src="https://unpkg.com/vue"></script>
  </head>
  <body class="bg-gray-200">
    <div id="app" class="">
        
        <div class="text-center mt-10">
            <p class="text-gray-600 italic text-sm">this round's prompt is...</p>
            <p id="prompt" class="text-4xl">Oranges</p>
            <p id="timer" class="font-serif text-6xl">120</p>
        </div>
        
        <div class="my-40 justify-items-center mx-auto grid gap-5 grid-cols-2 grid-rows-3 xl:grid-cols-5 xl:grid-rows-1">
            <player-box id="1" color="text-red-400" name="Player 1"></player-box>
            <player-box id="2" color="text-blue-400" name="Player 2"></player-box>
            <player-box id="3" color="text-green-400" name="Player 3"></player-box>
            <player-box id="4" color="text-yellow-500" name="Player 4"></player-box>
            <player-box id="5" color="text-purple-500" name="Player 5"></player-box>
        </div>

        <div class="mx-auto w-1/3 text-center justify-items-center bg-white pb-10">
            <p class="my-3 font-bold" id="youAreMessage"></p>
            <p>Enter your Aphorism:</p>
            <form id="form" action="">
                <input class="outline-black w-1/2 mx-10" id="input" maxlength="130" autocomplete="off" /><button class="rounded-lg px-3 py-1 bg-gray-300">Send</button>
            </form>
        </div>

    </div>
    <script src="js/components.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();

        var form = document.getElementById('form');
        var input = document.getElementById('input');
        var timer = document.getElementById('timer');
        var time
        var playerNumber;

        form.addEventListener('submit', function(e) {
            e.preventDefault();
            if (input.value) {
            socket.emit('chat message', [input.value, playerNumber]);
            input.value = '';
            }
        });

        socket.on('chat message', function(msg) {
            document.getElementById(msg[1]).querySelector("#poem").innerHTML = msg[0];
        });

        socket.on('cannot join', function(){
            document.body.innerHTML = '<h1> ROOM FULL </h1>';
        })

        socket.on('assign player', function(playerData) {
            time = playerData['time'];
            playerNumber = String(playerData['number']);
            document.getElementById('youAreMessage').innerHTML = `You Are Player ${playerNumber}`;
        })

        

    </script>
  </body>
</html>